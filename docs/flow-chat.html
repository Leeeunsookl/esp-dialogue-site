<h1>ğŸ’¬ ê°ì‘ì ì±„íŒ…</h1>

  <!-- ì„ ì–¸ë¶€(ìœ ì§€ ê°€ëŠ¥) -->
  <script type="esp/flow">
  { "entity": "ì‹¬ì—°", "type": "chat", "style": "direct", "mount": "#flow-mount" }
  </script>

  <!-- â–¼â–¼â–¼ Hook êµì²´: #chat â†’ #flow-mount ì‚¬ìš© â–¼â–¼â–¼ -->
  <section class="board" id="flow-mount" aria-live="polite"></section>
  <script src="./esp_autopilot.js?v=2025-09-08e" defer></script>
  <!-- â–²â–²â–² -->
<!-- ensure latest js (cache-bust) -->
<script src="./esp_autopilot.js?v=fixA1" defer></script>

<!-- Self-healing Actions hotfix (mobile-safe, single paste) -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  // 1) ë³´ë“œ/íˆ´ë°”/ë²„íŠ¼ í™•ë³´(ì—†ìœ¼ë©´ ìƒì„±)
  const mount = document.querySelector('#flow-mount') || (function(){
    const s = document.createElement('section');
    s.className = 'board'; s.id = 'flow-mount'; s.setAttribute('aria-live','polite');
    document.body.appendChild(s);
    return s;
  })();

  function ensureToolbar() {
    let bar = document.getElementById('flow-toolbar');
    if (!bar) {
      bar = document.createElement('div');
      bar.id = 'flow-toolbar';
      bar.style = 'display:flex;gap:8px;margin:8px 0;align-items:center;flex-wrap:wrap;position:relative;z-index:10;padding:6px;border:1px dashed #1a2028;border-radius:8px;background:#0d1218';
      mount.prepend(bar);
    }
    function mkBtn(id, label){
      let b = document.getElementById(id);
      if(!b){ b = document.createElement('button'); b.id=id; b.textContent=label; b.style='padding:8px 14px'; bar.appendChild(b); }
      return b;
    }
    mkBtn('flow-send','ì „ì†¡');              // ìˆì–´ë„ ê·¸ëŒ€ë¡œ ë‘ 
    mkBtn('flow-export','Export');          // ìˆì–´ë„ ê·¸ëŒ€ë¡œ ë‘ 
    mkBtn('flow-stats','Stats');            // ìˆì–´ë„ ê·¸ëŒ€ë¡œ ë‘ 
    return mkBtn('flow-actions','Actions'); // ë°˜ë“œì‹œ ë³´ì¥
  }

  const btnActions = ensureToolbar();

  // 2) í‘œì‹œ ì˜ì—­ í™•ë³´
  let pane = document.getElementById('flow-actions-pane');
  if (!pane) {
    pane = document.createElement('div');
    pane.id = 'flow-actions-pane';
    pane.style = 'margin-top:8px;color:#8a97a6;font-size:12px';
    mount.appendChild(pane);
  }

  // 3) renderActionsê°€ ì—†ìœ¼ë©´ ì •ì˜(êµ¬ JS í˜¸í™˜)
  if (typeof window.renderActions !== 'function') {
    window.renderActions = function () {
      const q = (window.Adapter && Array.isArray(Adapter.queue)) ? Adapter.queue.slice(-50) : [];
      if (!q.length) { pane.textContent = 'Actions: (empty)'; return; }
      const rows = q.map(a=>{
        const t = new Date(a.ts||Date.now()).toLocaleTimeString();
        const who = a.actor || 'flow';
        const tp  = a.type  || 'auto';
        const tx  = a.text  || '';
        return `â€¢ [${t}] ${tp} :: ${who} :: ${tx}`;
      }).join('\n');
      pane.innerHTML = '<pre style="white-space:pre-wrap">'+rows+'</pre>';
    };
  }

  // 4) ë²„íŠ¼ ë°”ì¸ë”©(í•­ìƒ ì¬ì„¤ì •)
  btnActions.onclick = window.renderActions;

  // 5) ì²« ë¡œë“œì—ì„œ í•œ ë²ˆ ìë™ í‘œì¶œ(ì„ íƒ)
  // window.renderActions();
});
</script>
</body>
</html>
