:root{
  --bg:#0b0e11; --fg:#e8eef5; --muted:#8a97a6;
  --line:#1a2028; --card:#10151b; --accent:#78f3ff;
  --safe-t:env(safe-area-inset-top); --safe-b:env(safe-area-inset-bottom);
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.6 system-ui,apple-system,Segoe UI,Roboto}
.app{min-height:100dvh;display:flex;flex-direction:column;gap:10px;
     padding:10px 10px calc(12px + var(--safe-b))}

/* 헤더 */
.top{display:flex;align-items:center;gap:12px}
.brand{font-weight:800}
.links a{color:var(--accent);text-decoration:none;margin-right:12px}

/* 툴바 */
.toolbar{display:flex;gap:10px;position:sticky;top:calc(0px + var(--safe-t));z-index:5;
  background:#0d1218cc;border:1px solid var(--line);backdrop-filter:blur(4px);
  padding:8px;border-radius:12px}
.toolbar button{padding:10px 14px;border-radius:12px;border:1px solid var(--line);
  background:#10151b;color:var(--fg)}
.toolbar button:first-child{background:#131a22}

/* 보드: 화면 대부분 차지 */
.board{
  flex:1;               /* 핵심: 남는 공간 전부 사용 */
  min-height:60dvh;     /* 처음 로드에서도 큼 */
  border:1px solid var(--line); background:var(--card);
  border-radius:16px; padding:14px; overflow:auto;
}
.bubble{max-width:78%; padding:10px 12px; border:1px solid var(--line);
  background:#0d1218; border-radius:16px; word-wrap:break-word; word-break:break-word}
.row{display:flex; gap:10px; margin:8px 0}
.row.me{justify-content:flex-end}
.row.me .bubble{background:#0e1822; border-color:#0f2533}
.meta{font-size:12px;color:var(--muted);margin-top:4px}

/* 컴포저(챗GPT 스타일) */
.composer{display:flex;flex-direction:column;gap:8px}
.input-wrap{position:relative;border:1px solid var(--line);background:#0c1117;
  border-radius:16px;padding:10px 56px 10px 12px}
#flow-input{
  width:100%; min-height:24px; max-height:40vh; resize:none; overflow:auto;
  border:0; outline:0; background:transparent; color:var(--fg); line-height:1.6;
  font:15px/1.6 system-ui,apple-system,Segoe UI,Roboto;
}
#flow-send{
  position:absolute; right:8px; bottom:8px; border:0; border-radius:12px;
  background:var(--accent); color:#001118; font-weight:800; padding:10px 12px;
}
.metrics{color:var(--muted);font-size:14px}

/* Actions */
.actions{border:1px solid var(--line);border-radius:16px;background:#0d1218;overflow:hidden;transition:max-height .25s ease}
.actions.collapsed{max-height:0;padding:0;border-width:0}
.actions:not(.collapsed){max-height:40dvh}
.actions-inner{padding:12px}
.actions h3{margin:0 0 6px;color:#bdefff}
#flow-actions-log{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:13px;white-space:pre-wrap}

/* 워터마크: 페이지 바닥 */
.watermark{margin-top:10px;border:1px solid var(--line);border-radius:16px;background:#0d1218;
  padding:12px;color:#9fb1c3;font-size:12px}

/* 접근성 */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* 모바일 */
@media (max-width:520px){
  .links{display:none}
  .bubble{max-width:86%}
}
